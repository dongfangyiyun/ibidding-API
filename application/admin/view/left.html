<aside class="el-aside" id="left">
  <el-menu :default-active="defaultActive" @open="handleOpen" @close="handleClose" background-color="#393D49" text-color="#fff"
    active-text-color="#40ccfd" style="height: 100%;">
    <div v-for="(nav, navKey) in leftNavs" :key="navKey">
      <!-- 有子菜单 -->
      <el-submenu v-if="nav._child" :index="nav.id">
        <template slot="title">
          <i v-show="nav.icon" class="iconfont" :class="nav.icon" style="color: #fff;padding-right: 5px;"></i>
          <span>{{nav.name}}</span>
        </template>
        <el-menu-item v-for="(childNav, childNavKey) in nav._child" :key="childNavKey" :index="childNav.id" @click="selectLeftNavId(childNav)">
          <template slot="title">
            <span>{{childNav.name}}</span>
          </template>
        </el-menu-item>
      </el-submenu>
      <!-- 无子菜单 -->
      <el-menu-item v-if="!nav._child" @click="selectLeftNavId(nav)" :index="nav.id">
        <template slot="title">{{nav.name}}</template>
      </el-menu-item>

    </div>
  </el-menu>
</aside>

<script>
  let leftApp = new Vue({
    el: '#left',
    data() {
      return {
        leftNavs: getStorage('adminNavs').filter(item => item.is_top == 0),
        defaultActive: Number(getStorage('selectLeftNavId'))
      }
    },
    methods: {
      handleOpen(key, keyPath) {
        // console.log(key, keyPath);
      },
      handleClose(key, keyPath) {
        // console.log(key, keyPath);
      },
      selectLeftNavId(nav) {
        rmStorage('selectTopNavId');
        setStorage('selectLeftNavId', nav.id);
        location = nav.href;
      }
    }
  })
</script>